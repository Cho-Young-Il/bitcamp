<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="/Ajax-basic/framework.js"></script>
<script>
window.onload = function () {
	/*
	var obj = document.querySelector("[type=button]")
	obj.addEventListener("click", function () {
		alert(3);
	});
	$("[type=button]").click(function () {
		alert(2);
	});	
	*/
	
	var httpRequest;
	
	// 사용자 이벤트에 대한 처리 등록
	$("[type=button]").on("click", function () {
		// Ajax 요청과 응답 처리를 진행하는 XMLHttpRequest 객체 생성
		httpRequest = new XMLHttpRequest();	
		
		// 사용자가 정의한 함수를 응답이 오면 호출할 콜백함수로 등록
		httpRequest.onreadystatechange = responseMsg;
		
		// 서버로 비동기 요청하기
		// open("요청방식", "요청 페이지 경로", 동기/비동기 여부);
		httpRequest.open("GET", "/Ajax-basic/hello", true);
		// send();
		httpRequest.send(null);	
	});	
	
	// Ajax 요청에 대한 응답데이터를 화면에 처리할 콜백함수 생성
	function responseMsg() {
		// 서버의 응답이 다 왔을때
		if (httpRequest.readyState == 4) {
			// 서버에서 오류없이 정상적으로 처리되었을때
			if (httpRequest.status == 200) {
				// 서버의 응답 데이터 꺼내기
// 				document.getElementById("msgView").innerHTML =
// 					httpRequest.responseText;
				$("#msgView").html(httpRequest.responseText);
			}
		}	
	}
	
};
</script>
</head>
<body>
	<h1>서버에서 받은 메세지</h1>
	<div id="msgView"></div>
	<br />
	<input type="button" value="서버에 자료요청" />
</body>
</html>











